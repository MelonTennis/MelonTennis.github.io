---
layout: post
title: Distributed System II
subtitle: 15640 DS2
date: 2017-12-20
categories: Note
tags: [DS, 15640]
catalog: true
---

## Distributed System II

è¶Šå†™è¶Šæ…¢ã€‚æ•¬ä½©å°åœŸåˆ€å‰è¾ˆã€‚è¿™ä¸€ç¯‡å…³äºåˆ†å¸ƒå¼ç³»ç»Ÿä¸‹çš„é€šä¿¡å’ŒRPCã€‚

é¦–å…ˆDanielä»‹ç»äº†ç½‘ç»œç›¸å…³çŸ¥è¯†å’Œä¸€äº›éœ€è¦çŸ¥é“çš„æ¦‚å¿µğŸ‘‡ ...ä»–çœŸå¯çˆ±,å¯...

<img src="https://raw.githubusercontent.com/YijiaJin/Plot/master/network.png" style="zoom:40%">

### Communication 

è¿™èŠ‚ä¸»è¦ä»‹ç»ç›¸å…³æ¦‚å¿µã€‚é¦–å…ˆä»‹ç»äº†ä¸€äº›Communicationçš„å¸¸è§æ¦‚å¿µï¼š

Multiplexing å¤šè·¯å¤ç”¨: share network resources

Packet Switching åˆ†ç»„äº¤æ¢: Source sends independent information as self-contained packets that have an address.

**Packey Delay** åŒ…å»¶è¿Ÿ: 

* Sum of a number of different delay components:
* Propagation delay on each link.
  * Proportional to the length of the link
* Transmission delay on each link.
  * Proportional to the packet size and 1/link speed
* Processing delay on each router.
  * Depends on the speed of the router
* Queuing delay on each router.
  * Depends on the traffic load and queue size

**Commication channel model**:

- Latency - how long does it take for the first bit to reach destination
- Capacity - how many bits/sec can we push through? (â€œbandwidthâ€)
- Jitter - how much variation in latency?
- Loss / Reliability - can the channel drop packets?
- Reordering

Stop & Forward: 2*(Prob + xmit)	

Cut through: 2*Prob + xmit			
Stop & Wait: sender wait for ack before next communication

â€¦.DSå‡ºåˆ†äº†æˆ‘è€ƒçš„æ˜¯ä¸ªä»€ä¹ˆà²¥_à²¥ æˆ‘ä¸é…å´‡æ‹œDanielä¸é…å–œæ¬¢wè…¿ã€‚æˆ‘è¿˜ç»§ç»­å†™å—ï¼Œåæ­£åˆä¸ä¼šæœ‰ä»€ä¹ˆç”¨ã€‚æˆ‘è¿™ä¸€å­¦æœŸåªåŠªåŠ›å­¦ä¹ DSï¼Œåªæœ‰DSå´©äº†ã€‚æ˜¯æˆ‘å­¦çš„è¿˜ä¸å¤ŸåŠªåŠ›ï¼Œä¸€å®šæ˜¯è¿™æ ·.... å¿ƒç—›åˆ°ä¸èƒ½å‘¼å¸:) è¿™å¤§æ¦‚ï¼Œå°±æ˜¯å¼±å§...

**Internet**

* An inter-net: a network of networks
* The Internet: the interconnected set of networks of the Internet Service Providers
* Challenges: 
  * Heterogeneity: address format/performance/packet size/routing/loss/in-order delivery
  * Standard -> IP

**IP Layering**

<img src="https://raw.githubusercontent.com/YijiaJin/Plot/master/IP.png" style="zoom:50%">

...å’Œä¹‹å‰é€šä¿¡å­¦çš„æ˜¯ä¸€æ ·çš„ã€‚

**Failure models** 



* Fail-stop:  When something goes wrong, the process stops / crashes / etc
* Fail-slow/fail-stutter: Performance may vary on failures as well
* Byzantine: Anything that can go wrong, will. æˆ‘è€ƒè¯•ä¸€å®šæ˜¯åŸºäºæ‹œå åº­æ¨¡å‹çš„è€ƒè¯•...

**Client & Server**

* Client: Initiates contact with server/Typically requests service from server
* Server: Provides requested service toclient

**TCP VS. UDP**

| TCP                                      | UDP                                      |
| ---------------------------------------- | ---------------------------------------- |
| Reliable - guarantee delivery            | Unreliable â˜º, no guarantee of delivery   |
| Byte stream â€“ in-order delivery          | Single socket to receive messages - not necessary in-order |
| Connection oriented - single socket/connectoin | Datagram â€“ independent packets, must address each one |
| One round-trip time to setup connection/fix lost packet | Packet sliently disappears               |
| Figures out how fast to send data        | No                                       |
| e.g. Phone call, web, email, telnet      | e.g. postal mail, multimedia, voice over IP |



### Remote Procedure Calls

RPCï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œè¯•å›¾å°†è¿œç¨‹è°ƒç”¨è¡¨ç°çš„å¦‚åŒæœ¬åœ°çš„è°ƒç”¨ã€‚				
RPC goals:

* Ease of programming
* Hide complexity	
* Automates task of implementing distributed
  computation
* Familiar model for programmers	

RPCå¯ä»¥ä½¿è¿œç¨‹çš„è°ƒç”¨çœ‹èµ·æ¥åƒæœ¬åœ°è°ƒç”¨ï¼Œå› æ­¤æä¾›äº†åˆ†å¸ƒå¼çš„é€æ˜æ€§ï¼Œä½†æ˜¯ç”±äºåœ¨ä¸åŒçš„æœºå™¨ä¸Šè°ƒç”¨ï¼Œå¯èƒ½æœ‰ä¸åŒçš„åœ°å€ç©ºé—´å’ŒOSï¼Œè¦å°†æ•°æ®è½¬æ¢ä¸ºæœ¬åœ°çš„æ ¼å¼ã€‚

Client Stub: 

* **Marshals** arguments into machine-independent format 
* Sends request to server
* Waits for response
* **Unmarshals** result and returns to caller

Server stub:

* **Unmarshals** arguments and builds stack frame
* Calls procedure
* Server stub marshals results and sends reply

æ‰€ä»¥ï¼Œå€¼ä¼ å‚ä¼šæ¯”åœ°å€ä¼ å‚ç®€å•å¾—å¤šã€‚å€¼ä¼ å‚åªéœ€è¦å°†å€¼å¤åˆ¶åˆ°networkä¸­ï¼Œè€Œåœ°å€ä¼ å‚éœ€è¦äº‹å…ˆçŸ¥é“æ•°æ®çš„å¤§å°ï¼Œå‘é€ä¸€ä»½æ•°æ®çš„æ‹·è´ï¼Œæ”¾åœ¨è¿œç¨‹ç³»ç»Ÿçš„å†…å­˜ä¸­ï¼Œè®²è¿™å—åœ°å€çš„æŒ‡é’ˆä¼ åˆ°serverï¼Œç„¶åå‘é€ç»™clientã€‚

**RPC Failures**

Partial: local computing/distributedcomputing

Solution: Strawman

**Possible semantics**

* Exactly once: impossible in practice 
* At least once: only for idempotent operations, client try until success
* At most once: 0 or 1, client give up easily
* Zero or once: same as at most once



è‡ªæˆ‘æ€€ç–‘




â€‹					
â€‹				
â€‹			
â€‹		
â€‹					
â€‹			
â€‹		
â€‹	

â€‹			
â€‹		
â€‹	






â€‹				
â€‹			
â€‹		
â€‹	 	

â€‹		
â€‹	


â€‹				
â€‹			
â€‹		
â€‹					
â€‹			
â€‹		
â€‹	 







